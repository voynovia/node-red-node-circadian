<script type="text/javascript">
  RED.nodes.registerType('location', {
      category: 'config',
      defaults: {
        name: {},
        lat: {value: 0.0, required: true},
        lon: {value: 0.0, required: true}
      },
      label: function(){
        return this.name || "Location";
      }
  });
</script>

<script type="text/x-red" data-template-name="location">
  <div class="form-row">
    <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
    <input type="text" id="node-config-input-name" placeholder="Location Name">
  </div>
  <div class="form-row">
    <label for="node-config-input-lat"><i class="fa fa-map"></i> Latitude</label>
    <input type="text" id="node-config-input-lat">
  </div>
  <div class="form-row">
      <label for="node-config-input-lon"><i class="fa fa-map"></i> Longitude</label>
      <input type="text" id="node-config-input-lon">
  </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('lighting',{
    	category: 'advanced-input',
      color: "#ffcc66",
    	defaults: {
        location: { type: "location", required: true },
        minct: {value: 2700, required: true},
        maxct: {value: 6500, required: true},
        minbr: {value: 1, required: true},
        maxbr: {value: 100, required: true},
        period: {value: 5, required: true},
    		topic: {},
    		name: {}
    	},
    	outputs: 1,
    	inputs: 0,
    	label: function(){
        return this.name || "Lighting";
      },
    	icon: 'sun.png'
    });
</script>

<script type="text/x-red" data-template-name="lighting">
  <div class="form-row">
    <label for="node-input-location"><i class="fa fa-map-marker"></i> Location</label>
    <input type="text" id="node-input-location">
  </div>
  <div class="form-row">
    <label for="node-input-minct"><i class="fa"></i> Min. temp.</label>
    <input type="text" id="node-input-minct" >
  </div>
  <div class="form-row">
    <label for="node-input-maxct"><i class="fa"></i> Max. temp.</label>
    <input type="text" id="node-input-maxct" >
  </div>
  <div class="form-row">
    <label for="node-input-minbr"><i class="fa fa-sun"></i> Min. bright.</label>
    <input type="text" id="node-input-minbr" >
  </div>
  <div class="form-row">
    <label for="node-input-maxbr"><i class="fas fa-sun"></i> Max. bright.</label>
    <input type="text" id="node-input-maxbr" >
  </div>
  <div class="form-row">
      <label for="node-input-period"><i class="fa fa-clock-o"></i> Interval(min)</label>
      <input type="text" id="node-input-period" >
  </div>
  <div class="form-row">
    <label for="node-input-topic"><i class="fa"></i> Topic</label>
    <input type="text" id="node-input-topic">
  </div>
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Temperature">
  </div>
</script>

<script type="text/x-red" data-help-name="lighting">
	<p>A node to give the color temperature and brightness for a given location.</p>
  <p><strong>Inputs:</strong></p>
  <ul>
    <li>Location: The location you are interested in.</li>
    <li>Min. temp.: The minimum color temperature.</li>
    <li>Max. temp.: The maximum color temperature.</li>
    <li>Min. bright.: The minimum brightness.</li>
    <li>Max. bright.: The maximum brightness.</li>
    <li>Interval(min): Time in minutes to output data (defaults to 5mins).</li>
  </ul>
  <p><strong>Outputs:</strong></p>
  <pre>{
    "percent": -75
    "temp": 2700
    "brightness": 34
  }</pre>
    <p>Where:</p>
    <ul>
      <li>percent: Sun position.</li>
      <li>temp: Color Temperature.</li>
      <li>brightness: Brightness.</li>
    </ul>
</script>